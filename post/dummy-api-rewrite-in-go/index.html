<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>Dummy API, Go rewrite</title>

  
  <link rel="stylesheet" href="http://www.espenbraastad.no/css/poole.css">
  <link rel="stylesheet" href="http://www.espenbraastad.no/css/syntax.css">
  <link rel="stylesheet" href="http://www.espenbraastad.no/css/hyde.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">

  
  <link rel="stylesheet" href="/highlightjs/default.min.css">
  <script src="/highlightjs/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/favicon.ico">

  
  <link href="" rel="alternate" type="application/rss+xml" title="Espen Braastad" />

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  
    ga('create', 'UA-59220530-1', 'auto');
    ga('send', 'pageview');
  
  </script>
</head>

  <body>

    <div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <h1>Espen Braastad</h1>
    </div>

    <ul class="sidebar-nav">
      <li><a href="/">Home</a> </li>
      
        <li><a href="/post">Posts</a></li>
    </ul>
  </div>
</div>


    <div class="content container">
      <div class="post">
        <h1>Dummy API, Go rewrite</h1>
        <span class="post-date">Sat, May 16, 2015</span>
        <p>Dummy API was <a href="http://www.espenbraastad.no/post/dummy-api/">originally</a> written in Lua for running on top of <a href="http://openresty.org/">OpenResty</a>. Reasons were high performance and simplicity. The most common Linux distributions do not provide packages for OpenResty in their repositories, which means that it has to be installed from source. This is straight forward, but it adds up - both in time required and extra build dependencies.</p>

<p>The purpose of Dummy API is to be that web application that can be rapidly installed and started when it is necessary to test API managers and web caches with a proper web application. The installation should be as simple as quick as possible.</p>

<p>To get make the installation simpler and quicker, I turned to <a href="https://golang.org/">Go</a> and its <a href="http://golang.org/pkg/net/http/">http server</a>. I find it really appealing that it is possible to compile an entire web application including all dependencies into one binary file. For Dummy API it means that the web application and the web server can be compiled and distributed as one executable file. When building the binary, it is possible to cross compile to various architectures and platforms.</p>

<p>I have built and pushed the binary version built for Linux on x86_64 to the repository. The result is that the installation steps have been narrowed down to:</p>

<pre><code>$ wget https://github.com/espebra/dummy-api/raw/master/dummy-api
$ chmod +x dummy-api
$ ./dummy-api
</code></pre>

<p>Dummy API should be executed as an unprivileged user. By default, it will bind to 127.0.0.1:1337. The usage guide for the daemon is shown with <code>./dummy-api -help</code>:</p>

<pre><code>Usage of ./dummy-api:
  -host=&quot;127.0.0.1&quot;: Listen host
  -maxheaderbytes=1048576: Max header bytes.
  -port=1337: Listen port
  -readtimeout=10: Read timeout in seconds
  -writetimeout=10: Write timeout in seconds
</code></pre>

<p>The usage guide for web clients is shown with the <code>help</code> query parameter:</p>

<pre><code>GET http://host/?help
</code></pre>

<p>The Go version is available in <a href="https://github.com/espebra/dummy-api/">master</a>, while the Lua version is available in the <a href="https://github.com/espebra/dummy-api/tree/lua">Lua branch</a>.</p>

        <div id="disqus_thread"></div>
<script type="text/javascript">
     
    var disqus_shortname = 'espenbraastad';
    var disqus_identifier = 'Dummy API, Go rewrite';

     
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

      </div>
    </div>
  </body>
</html>
