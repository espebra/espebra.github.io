<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
	<link href="http://gmpg.org/xfn/11" rel="profile">
	<meta http-equiv="content-type" content="text/html; charset=utf-8">
	
	
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
	
	<title>Posts</title>
	
	
	<link rel="stylesheet" href="http://www.espenbraastad.no//bootstrap/css/bootstrap.min.css">
	<link rel="stylesheet" href="http://www.espenbraastad.no//font-awesome/css/font-awesome.min.css">
	<link rel="stylesheet" href="/custom.css">
	
	
	<link rel="stylesheet" href="/prism/prism.css">
	
	
	<link href="http://www.espenbraastad.no/posts/index.xml" rel="alternate" type="application/rss+xml" title="Espen Braastad" />
	
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
		
		ga('create', 'UA-59220530-1', 'auto');
		ga('send', 'pageview');
	</script>
</head>
<body>


<div class="container">
        <div class="row">
                <div class="col-md-12">
                        <ol class="breadcrumb">
                                <li class="breadcrumb-item"><a href="/">Home</a></li>
                                <li class="breadcrumb-item active">Posts</li>
                        <ol>
                </div>
        </div>
</div>

<div class="container">

	<div class="row">
		<div class="col-md-12">
			<h3>
				CentOS 7 root filesystem on tmpfs
				<a href="http://www.espenbraastad.no/posts/centos-7-rootfs-on-tmpfs/"><i class="fa fa-arrow-right" aria-hidden="true"></i></a>
			</h3>
			<small class="text-muted">
				Published Friday, January 6, 2017 (700 words, 4 minutes to read).
				<a href="http://www.espenbraastad.no/posts/centos-7-rootfs-on-tmpfs/#comments">
				                        <span class="disqus-comment-count" data-disqus-identifier="CentOS 7 root filesystem on tmpfs"></span>
				</a>
			</small>
			<p>
				Several years ago I wrote a series of posts on how to run EL6 with its root filesystem on tmpfs. This post is a continuation of that series, and explains step by step how to run CentOS 7 with its root filesystem in memory. It should apply to RHEL, Ubuntu, Debian and other Linux distributions as well. The post is a bit terse to focus on the concept, and several of the steps have potential for improvements.... <a href="http://www.espenbraastad.no/posts/centos-7-rootfs-on-tmpfs/">read more</a>
			</p>
		</div>
	</div>

	<div class="row">
		<div class="col-md-12">
			<h3>
				Filebin upgrade
				<a href="http://www.espenbraastad.no/posts/filebin-upgrade/"><i class="fa fa-arrow-right" aria-hidden="true"></i></a>
			</h3>
			<small class="text-muted">
				Published Sunday, May 29, 2016 (600 words, 3 minutes to read).
				<a href="http://www.espenbraastad.no/posts/filebin-upgrade/#comments">
				                        <span class="disqus-comment-count" data-disqus-identifier="Filebin upgrade"></span>
				</a>
			</small>
			<p>
				https://filebin.net is a public and free file upload/sharing service. Its main design principle is to be incredibly simple to use.
It has been in production for several years, and has more or less been unmodified until now. Today it has been upgraded in several ways, and this post aims to elaborate on some of the changes.
Complete rewrite The previous version of Filebin was written in Python and kept meta data in MongoDB.... <a href="http://www.espenbraastad.no/posts/filebin-upgrade/">read more</a>
			</p>
		</div>
	</div>

	<div class="row">
		<div class="col-md-12">
			<h3>
				Gofer - Simple notification IRC bot
				<a href="http://www.espenbraastad.no/posts/gofer-notification-irc-bot/"><i class="fa fa-arrow-right" aria-hidden="true"></i></a>
			</h3>
			<small class="text-muted">
				Published Friday, January 8, 2016 (300 words, 1 minutes to read).
				<a href="http://www.espenbraastad.no/posts/gofer-notification-irc-bot/#comments">
				                        <span class="disqus-comment-count" data-disqus-identifier="Gofer - Simple notification IRC bot"></span>
				</a>
			</small>
			<p>
				Gofer is an notification type of IRC bot which is simple to deploy and super easy to integrate with existing services. It serves two main purposes:
 Process messages in IRC channels and execute commands to trigger actions based on pre-defined patterns. A good use case is to look for messages matching #\d+ (for example #1337), look up the title and status in a issue tracker and print the information back in the IRC channel:... <a href="http://www.espenbraastad.no/posts/gofer-notification-irc-bot/">read more</a>
			</p>
		</div>
	</div>

	<div class="row">
		<div class="col-md-12">
			<h3>
				Monitor stand / tabletop table IKEA hack
				<a href="http://www.espenbraastad.no/posts/monitor-stand-ikea-hack/"><i class="fa fa-arrow-right" aria-hidden="true"></i></a>
			</h3>
			<small class="text-muted">
				Published Wednesday, September 16, 2015 (300 words, 2 minutes to read).
				<a href="http://www.espenbraastad.no/posts/monitor-stand-ikea-hack/#comments">
				                        <span class="disqus-comment-count" data-disqus-identifier="Monitor stand / tabletop table IKEA hack"></span>
				</a>
			</small>
			<p>
				Background I needed something that would put my desktop monitors at the proper height on my desk. Instead of simply placing the monitors on some cardboards boxes, I decided to pick up something from IKEA to make a custom tabletop table / monitor stand.
Hardware    Article # Item Price     102.678.95 CAPITA 4 pack of stainless steel legs, with a length of 16 cm NOK 95,-   301.... <a href="http://www.espenbraastad.no/posts/monitor-stand-ikea-hack/">read more</a>
			</p>
		</div>
	</div>

	<div class="row">
		<div class="col-md-12">
			<h3>
				Dummy API, Go rewrite
				<a href="http://www.espenbraastad.no/posts/dummy-api-rewrite-in-go/"><i class="fa fa-arrow-right" aria-hidden="true"></i></a>
			</h3>
			<small class="text-muted">
				Published Saturday, May 16, 2015 (500 words, 3 minutes to read).
				<a href="http://www.espenbraastad.no/posts/dummy-api-rewrite-in-go/#comments">
				                        <span class="disqus-comment-count" data-disqus-identifier="Dummy API, Go rewrite"></span>
				</a>
			</small>
			<p>
				Dummy API was originally written in Lua for running on top of OpenResty. Reasons were high performance and simplicity. The most common Linux distributions do not provide packages for OpenResty in their repositories, which means that it has to be installed from source. This is straight forward, but it adds up - both in time required and extra build dependencies.
The purpose of Dummy API is to be that web application that can be rapidly installed and started when it is necessary to test API managers and web caches with a proper web application.... <a href="http://www.espenbraastad.no/posts/dummy-api-rewrite-in-go/">read more</a>
			</p>
		</div>
	</div>

	<div class="row">
		<div class="col-md-12">
			<h3>
				Varnish goes upstack with varnish modules and varnish configuration language
				<a href="http://www.espenbraastad.no/posts/varnish-goes-upstack-with-varnish-modules-and-varnish-configuration-language/"><i class="fa fa-arrow-right" aria-hidden="true"></i></a>
			</h3>
			<small class="text-muted">
				Published Thursday, May 7, 2015 (2100 words, 10 minutes to read).
				<a href="http://www.espenbraastad.no/posts/varnish-goes-upstack-with-varnish-modules-and-varnish-configuration-language/#comments">
				                        <span class="disqus-comment-count" data-disqus-identifier="Varnish goes upstack with varnish modules and varnish configuration language"></span>
				</a>
			</small>
			<p>
				This post was first published at High Scalability.
Varnish Software has just released Varnish API Engine, a high performance HTTP API Gateway which handles authentication, authorization and throttling all built on top of Varnish Cache. The Varnish API Engine can easily extend your current set of APIs with a uniform access control layer that has built in caching abilities for high volume read operations, and it provides real-time metrics.... <a href="http://www.espenbraastad.no/posts/varnish-goes-upstack-with-varnish-modules-and-varnish-configuration-language/">read more</a>
			</p>
		</div>
	</div>

	<div class="row">
		<div class="col-md-12">
			<h3>
				Dummy API
				<a href="http://www.espenbraastad.no/posts/dummy-api/"><i class="fa fa-arrow-right" aria-hidden="true"></i></a>
			</h3>
			<small class="text-muted">
				Published Saturday, May 2, 2015 (500 words, 3 minutes to read).
				<a href="http://www.espenbraastad.no/posts/dummy-api/#comments">
				                        <span class="disqus-comment-count" data-disqus-identifier="Dummy API"></span>
				</a>
			</small>
			<p>
				Update: Dummy API has been rewritten in Go.
The purpose of Dummy API to act as a performant, simple and flexible HTTP API to use when testing API gateway performance. Put it behing a API gateway and generate responses to it from a set of consumers/clients. The Dummy API will read the request headers and query parameters and generate the responses accordingly. Some examples are custom cache-control header, response status and response delays.... <a href="http://www.espenbraastad.no/posts/dummy-api/">read more</a>
			</p>
		</div>
	</div>

	<div class="row">
		<div class="col-md-12">
			<h3>
				Remote console on HP ProLiant MicroServer G7 N54L
				<a href="http://www.espenbraastad.no/posts/remote-console-on-hp-proliant-microserver-g7-n54l/"><i class="fa fa-arrow-right" aria-hidden="true"></i></a>
			</h3>
			<small class="text-muted">
				Published Saturday, August 30, 2014 (200 words, 1 minutes to read).
				<a href="http://www.espenbraastad.no/posts/remote-console-on-hp-proliant-microserver-g7-n54l/#comments">
				                        <span class="disqus-comment-count" data-disqus-identifier="Remote console on HP ProLiant MicroServer G7 N54L"></span>
				</a>
			</small>
			<p>
				I bought the HP ProLiant MicroServer G7 N54L a while ago. I threw in a HP MicroServer Remote Access Card Kit to get remote console and power management. While the power management, web UI and CLI (over ssh) works fine out of the box, the remote console (KVM) does not. What happens is that the KVM client shows the following Out of range message:
To fix this, go into the BIOS.... <a href="http://www.espenbraastad.no/posts/remote-console-on-hp-proliant-microserver-g7-n54l/">read more</a>
			</p>
		</div>
	</div>

	<div class="row">
		<div class="col-md-12">
			<h3>
				Altibox, TV- og datatrafikk over samme nettverkskabel
				<a href="http://www.espenbraastad.no/posts/altibox-tv-and-data-over-the-same-ethernet-cable/"><i class="fa fa-arrow-right" aria-hidden="true"></i></a>
			</h3>
			<small class="text-muted">
				Published Thursday, May 22, 2014 (300 words, 2 minutes to read).
				<a href="http://www.espenbraastad.no/posts/altibox-tv-and-data-over-the-same-ethernet-cable/#comments">
				                        <span class="disqus-comment-count" data-disqus-identifier="Altibox, TV- og datatrafikk over samme nettverkskabel"></span>
				</a>
			</small>
			<p>
				Altibox leverer en hjemmesentral hvor man henter ut TV-signal og internettilgang fra to (eller flere) forskjellige RJ45-porter. Som trådløs router har hjemmesentralen kun et minimum av funksjonalitet, og man skal ikke være en veldig avansert bruker før man vil rekonfigurere hjemmesentralen som en bridge og heller ha en egen trådløs router på baksiden. Dette gir også mening dersom boligen har flere etasjer, og hjemmesentralen ikke er kraftig nok til å levere god nok trådløs dekning.... <a href="http://www.espenbraastad.no/posts/altibox-tv-and-data-over-the-same-ethernet-cable/">read more</a>
			</p>
		</div>
	</div>

	<div class="row">
		<div class="col-md-12">
			<h3>
				Temperature trend monitoring at home
				<a href="http://www.espenbraastad.no/posts/temperature-trend-monitoring-at-home/"><i class="fa fa-arrow-right" aria-hidden="true"></i></a>
			</h3>
			<small class="text-muted">
				Published Wednesday, February 19, 2014 (600 words, 3 minutes to read).
				<a href="http://www.espenbraastad.no/posts/temperature-trend-monitoring-at-home/#comments">
				                        <span class="disqus-comment-count" data-disqus-identifier="Temperature trend monitoring at home"></span>
				</a>
			</small>
			<p>
				Background I&rsquo;ve got balanced ventilation in my apartment. It works OK, but I don&rsquo;t fully understand how it behaves if knobs are pushed and pots are turned, and I&rsquo;m definitely not sure if its performance is as good as I should expect.
I&rsquo;m going to do some measurements to see how the system reacts to changes in the outside temperature and tuning of the various settings. The first parameter to measure is the temperature in the air intake, exhaust air and some of the ventilation valves in the different rooms in the apartment.... <a href="http://www.espenbraastad.no/posts/temperature-trend-monitoring-at-home/">read more</a>
			</p>
		</div>
	</div>

	<div class="row">
		<div class="col-md-12">
			<h3>
				CentOS/RHEL/SL 6: root filesystem on tmpfs, UPDATE #2
				<a href="http://www.espenbraastad.no/posts/el6-rootfs-on-tmpfs-update2/"><i class="fa fa-arrow-right" aria-hidden="true"></i></a>
			</h3>
			<small class="text-muted">
				Published Sunday, June 23, 2013 (700 words, 4 minutes to read).
				<a href="http://www.espenbraastad.no/posts/el6-rootfs-on-tmpfs-update2/#comments">
				                        <span class="disqus-comment-count" data-disqus-identifier="CentOS/RHEL/SL 6: root filesystem on tmpfs, UPDATE #2"></span>
				</a>
			</small>
			<p>
				Update 2017-06-30: Please see the updated guide which is more generic.
In a previous post, I’ve explained how to boot EL6 from memory without having / needing a physical disk.
A bright reader, Jeff, came up with an alternative method. This alternative method does not involve dd’ing the image into a loop device, but instead copying the contents of the disk image directly into tmpfs. The result is higher write/read performance and generally lower memory requirements.... <a href="http://www.espenbraastad.no/posts/el6-rootfs-on-tmpfs-update2/">read more</a>
			</p>
		</div>
	</div>

	<div class="row">
		<div class="col-md-12">
			<h3>
				CentOS/RHEL/SL 6: root filesystem on tmpfs, UPDATE
				<a href="http://www.espenbraastad.no/posts/el6-rootfs-on-tmpfs-update/"><i class="fa fa-arrow-right" aria-hidden="true"></i></a>
			</h3>
			<small class="text-muted">
				Published Thursday, March 21, 2013 (500 words, 3 minutes to read).
				<a href="http://www.espenbraastad.no/posts/el6-rootfs-on-tmpfs-update/#comments">
				                        <span class="disqus-comment-count" data-disqus-identifier="CentOS/RHEL/SL 6: root filesystem on tmpfs, UPDATE"></span>
				</a>
			</small>
			<p>
				Update 2017-06-30: Please see the updated guide which is more generic.
In EL6.4, the file /usr/share/dracut/modules.d/90dmsquash-live/dmsquash-live-root was updated so that the previous patch no longer works as it should. I’ve updated the patch, and here it is:
--- original 2013-03-20 16:25:23.698846581 +0100 +++ new 2013-03-21 08:58:11.175339694 +0100 @@ -24,6 +24,8 @@ getarg readonly_overlay &amp;&amp; readonly_overlay=&quot;--readonly&quot; || readonly_overlay=&quot;&quot; overlay=$(getarg overlay) +getarg toram &amp;&amp; toram=&quot;yes&quot; + # FIXME: we need to be able to hide the plymouth splash for the check really [ -e $livedev ] &amp; fs=$(blkid -s TYPE -o value $livedev) if [ &quot;$fs&quot; = &quot;iso9660&quot; -o &quot;$fs&quot; = &quot;udf&quot; ]; then @@ -132,7 +134,10 @@ BASE_LOOPDEV=$( losetup -f ) losetup -r $BASE_LOOPDEV $EXT3FS - do_live_from_base_loop + # Create overlay only if toram is not set + if [ -z &quot;$toram&quot; ] ; then + do_live_from_base_loop + fi fi # we might have an embedded ext3 on squashfs to use as rootfs (compressed live) @@ -163,13 +168,66 @@ umount -l /squashfs - do_live_from_base_loop + # Create overlay only if toram is not set + if [ -z &quot;$toram&quot; ] ; then + do_live_from_base_loop + fi +fi + +# If the kernel parameter toram is set, create a tmpfs device and copy the +# filesystem to it.... <a href="http://www.espenbraastad.no/posts/el6-rootfs-on-tmpfs-update/">read more</a>
			</p>
		</div>
	</div>

	<div class="row">
		<div class="col-md-12">
			<h3>
				KVM/Xen and libvirt: currentMemory, memory and ballooning. Where did my memory go?
				<a href="http://www.espenbraastad.no/posts/memory-ballooning/"><i class="fa fa-arrow-right" aria-hidden="true"></i></a>
			</h3>
			<small class="text-muted">
				Published Monday, September 24, 2012 (500 words, 2 minutes to read).
				<a href="http://www.espenbraastad.no/posts/memory-ballooning/#comments">
				                        <span class="disqus-comment-count" data-disqus-identifier="KVM/Xen and libvirt: currentMemory, memory and ballooning. Where did my memory go?"></span>
				</a>
			</small>
			<p>
				KVM and Xen provide a method to change the amount of memory in use by guests at runtime. The method is called memory ballooning [1, 2], and it must be supported by the guest operating system to work.
In libvirt, memory allocation (and hence the ballooning capability) for a guest can be configured using the memory, currentMemory and memballoon tags:
&lt;domain type='kvm'&gt; [...] &lt;memory unit='KiB'&gt;16777216&lt;/memory&gt; &lt;currentMemory unit='KiB'&gt;1048576&lt;/currentMemory&gt; [...] &lt;devices&gt; &lt;memballoon model='virtio'/&gt; &lt;/devices&gt; &lt;/domain&gt;  The guest can never use more memory than specified in the memory tag and it is the amount of memory the guest will use at boot time.... <a href="http://www.espenbraastad.no/posts/memory-ballooning/">read more</a>
			</p>
		</div>
	</div>

	<div class="row">
		<div class="col-md-12">
			<h3>
				Filebin available on http://filebin.net
				<a href="http://www.espenbraastad.no/posts/filebin-available/"><i class="fa fa-arrow-right" aria-hidden="true"></i></a>
			</h3>
			<small class="text-muted">
				Published Friday, July 27, 2012 (100 words, 1 minutes to read).
				<a href="http://www.espenbraastad.no/posts/filebin-available/#comments">
				                        <span class="disqus-comment-count" data-disqus-identifier="Filebin available on http://filebin.net"></span>
				</a>
			</small>
			<p>
				Filebin.net was created to try out the new File API features in HTML5.
Filebin is a web application that is somewhat similar to a pastebin, except that it&rsquo;s for files. It is written in Python, and the code is available on Github.... <a href="http://www.espenbraastad.no/posts/filebin-available/">read more</a>
			</p>
		</div>
	</div>

	<div class="row">
		<div class="col-md-12">
			<h3>
				CentOS/RHEL/SL 6: root filesystem on tmpfs
				<a href="http://www.espenbraastad.no/posts/el6-rootfs-on-tmpfs/"><i class="fa fa-arrow-right" aria-hidden="true"></i></a>
			</h3>
			<small class="text-muted">
				Published Monday, April 30, 2012 (600 words, 3 minutes to read).
				<a href="http://www.espenbraastad.no/posts/el6-rootfs-on-tmpfs/#comments">
				                        <span class="disqus-comment-count" data-disqus-identifier="CentOS/RHEL/SL 6: root filesystem on tmpfs"></span>
				</a>
			</small>
			<p>
				Update 2017-06-30: Please see the updated guide which is more generic.
UPDATE: The patch below has been updated here.
There are several scenarios where conventional hard drives are not really needed. Examples are HPC cluster nodes, virtualization nodes, home theater streaming PCs, silent desktops, internet cafés and embedded systems. Hard drives tend to fail, they are slow, they consume power, they generate heat and noise, and they are quite expensive if you need/want something faster and more reliable than SATA.... <a href="http://www.espenbraastad.no/posts/el6-rootfs-on-tmpfs/">read more</a>
			</p>
		</div>
	</div>

	<div class="row">
		<div class="col-md-12">
			<h3>
				KVM with iPXE in RHEL6
				<a href="http://www.espenbraastad.no/posts/kvm-with-ipxe-in-rhel6/"><i class="fa fa-arrow-right" aria-hidden="true"></i></a>
			</h3>
			<small class="text-muted">
				Published Wednesday, November 2, 2011 (500 words, 3 minutes to read).
				<a href="http://www.espenbraastad.no/posts/kvm-with-ipxe-in-rhel6/#comments">
				                        <span class="disqus-comment-count" data-disqus-identifier="KVM with iPXE in RHEL6"></span>
				</a>
			</small>
			<p>
				A while ago I discovered the amazing iPXE project. It is a complete PXE implementation with lots of nifty features, based on the gPXE project. Redhat ships the gPXE firmware for qemu and KVM, and you might want to use iPXE instead as the iPXE project currently seems to be more active. The major features (copied from ipxe.org):
 boot from a web server via HTTP boot from an iSCSI SAN boot from a Fibre Channel SAN via FCoE boot from an AoE SAN boot from a wireless network boot from a wide-area network boot from an Infiniband network control the boot process with a script  First, download the source code:... <a href="http://www.espenbraastad.no/posts/kvm-with-ipxe-in-rhel6/">read more</a>
			</p>
		</div>
	</div>

	<div class="row">
		<div class="col-md-12">
			<h3>
				munincollector-ng
				<a href="http://www.espenbraastad.no/posts/munincollector-ng/"><i class="fa fa-arrow-right" aria-hidden="true"></i></a>
			</h3>
			<small class="text-muted">
				Published Monday, August 16, 2010 (300 words, 2 minutes to read).
				<a href="http://www.espenbraastad.no/posts/munincollector-ng/#comments">
				                        <span class="disqus-comment-count" data-disqus-identifier="munincollector-ng"></span>
				</a>
			</small>
			<p>
				Munincollector-ng is a perl script that collects graphs from multiple munin installations to display them in one page. A scenario where this is helpful is when you have (too) many munin clients on (too) many munin masters, and you want to look through some of the graphs - i.e. the Disk usage in percent (aka df) plugin - without spending/wasting too much time browsing through the less important graphs.
It consists of one perl script and one configuration file.... <a href="http://www.espenbraastad.no/posts/munincollector-ng/">read more</a>
			</p>
		</div>
	</div>

</div>

<script id="dsq-count-scr" src="//espenbraastad.disqus.com/count.js" async></script>
<script src="http://www.espenbraastad.no//prism/prism.js"></script>
<script src="http://www.espenbraastad.no//jquery.min.js"></script>
<script>
	 
	$(function() { $('table').addClass('table table-responsive'); })
	$(function() { $('img').addClass('img-fluid'); })
</script>
</body>
</html>

